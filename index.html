<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Beer Label Generator</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="layout">
    <section class="controls" aria-labelledby="form-title">
      <h1 id="form-title">Beer Label Generator</h1>
      <p class="controls__intro">
        Enter the beer style and bottling date below, then print the page to create 18 labels per A4 sheet.
      </p>
      <form id="label-form">
        <div class="field">
          <label for="style">Style</label>
          <input id="style" name="style" type="text" placeholder="e.g. Hazy IPA" required />
        </div>
        <div class="field">
          <label for="bottled">Bottled on</label>
          <input id="bottled" name="bottled" type="date" />
        </div>
        <div class="actions">
          <button type="submit">Update labels</button>
          <button type="button" id="print">Print</button>
        </div>
      </form>
      <p class="controls__hint">Tip: Labels automatically update as you type. Use the Print button once you're happy with the preview.</p>
    </section>

    <section class="sheet" aria-label="Label sheet preview">
      <div id="labels" class="labels" aria-live="polite"></div>
    </section>
  </main>

  <script>
    const LABEL_COUNT = 18;

const form = document.getElementById('label-form');
const styleInput = document.getElementById('style');
const bottledInput = document.getElementById('bottled');
const labelsContainer = document.getElementById('labels');
const printButton = document.getElementById('print');

function formatDate(value) {
  if (!value) {
    return '';
  }

  const date = new Date(value);
  if (Number.isNaN(date.getTime())) {
    return value;
  }

  return date.toLocaleDateString(undefined, {
    year: 'numeric',
    month: 'short',
    day: 'numeric',
  });
}

function createLabelElements(styleValue, bottledValue) {
  labelsContainer.innerHTML = '';
  const styleText = styleValue || 'Beer Style';
  const bottledText = formatDate(bottledValue) || 'Bottled on';

  for (let index = 0; index < LABEL_COUNT; index += 1) {
    const label = document.createElement('article');
    label.className = 'label';
    label.setAttribute('role', 'group');
    label.setAttribute('aria-label', `Label ${index + 1}`);

    const content = document.createElement('div');
    content.className = 'label__content';

    const title = document.createElement('h2');
    title.className = 'label__title';
    title.textContent = styleText;

    const bottled = document.createElement('p');
    bottled.className = 'label__meta';
    bottled.textContent = bottledText;

    content.append(title, bottled);
    label.append(content);
    labelsContainer.append(label);
  }
}

function handleSubmit(event) {
  event.preventDefault();
  createLabelElements(styleInput.value.trim(), bottledInput.value.trim());
}

function handleInputChange() {
  createLabelElements(styleInput.value.trim(), bottledInput.value.trim());
}

form.addEventListener('submit', handleSubmit);
form.addEventListener('input', handleInputChange);

printButton.addEventListener('click', () => {
  window.print();
});

createLabelElements('', '');
  </script>
</body>
</html>
